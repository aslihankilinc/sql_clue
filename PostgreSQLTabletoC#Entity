DO $$
DECLARE
    table_schema text := 'sema_adi';
    table_name text := 'tablo_adi';
    result text := '';
    col record;
    clr_type text;
BEGIN
    result := 'public class ' || table_name || E'\n{';

    FOR col IN
        SELECT column_name, data_type, is_nullable
        FROM information_schema.columns
        WHERE table_schema = table_schema
          AND table_name = table_name
        ORDER BY ordinal_position
    LOOP
        -- PostgreSQL veri türünü C# veri türüne eşleştir
        clr_type := CASE col.data_type
            WHEN 'bigint' THEN 'long'
            WHEN 'integer' THEN 'int'
            WHEN 'smallint' THEN 'short'
            WHEN 'numeric' THEN 'decimal'
            WHEN 'real' THEN 'float'
            WHEN 'double precision' THEN 'double'
            WHEN 'boolean' THEN 'bool'
            WHEN 'character varying' THEN 'string'
            WHEN 'character' THEN 'string'
            WHEN 'text' THEN 'string'
            WHEN 'date' THEN 'DateTime'
            WHEN 'timestamp without time zone' THEN 'DateTime'
            WHEN 'timestamp with time zone' THEN 'DateTimeOffset'
            WHEN 'uuid' THEN 'Guid'
            WHEN 'bytea' THEN 'byte[]'
            ELSE 'UNKNOWN_' || col.data_type
        END;

        -- Nullable mı kontrol et
        IF col.is_nullable = 'YES' AND clr_type NOT IN ('string', 'byte[]') THEN
            clr_type := clr_type || '?';
        END IF;

        result := result || E'\n    public ' || clr_type || ' ' || col.column_name || ' { get; set; }';
    END LOOP;

    result := result || E'\n}';

    RAISE NOTICE '%', result;
END $$;
